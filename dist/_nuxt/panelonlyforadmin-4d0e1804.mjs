import{_ as v,r as O,y as _,d as p,l as T,h as I,I as A,f as C,g as M,s as k,u as U,i as w,o as l,c as o,j as h,w as b,T as x,k as a,b as t,F as N,m as S,n as f,v as g,q as j,p as V,e as P,t as y}from"./entry-aa6e85c7.mjs";const B={data(){return{actus:[],currentId:"",currentText:"",currentTitle:"",currentImgUrl:"",currentImgName:"",uploadProgress:0,isModalOpen:!1,isModifyActuModalOpen:!1,isCreateActuModalOpen:!1,isStagesOpen:!1,isAnimsOpen:!1,actuImage:""}},props:["isActusOpen"],beforeMount(){this.getActus()},methods:{async getActus(){this.actus.length>0&&(this.actus=[]),(await O(_(p,"actus"))).forEach(s=>{this.actus.push({id:s.id,text:s.data().text,title:s.data().title,imgUrl:s.data().imgUrl,imgName:s.data().imgName})})},getCurrentActu(n){const s=this.actus.findIndex(u=>u.id===n);this.currentId=n,this.currentTitle=this.actus[s].title,this.currentText=this.actus[s].text,this.currentImgUrl=this.actus[s].imgUrl,this.currentImgName=this.actus[s].imgName},resetCurrentActu(){this.currentId="",this.currentTitle="",this.currentText="",this.currentImgUrl="",this.currentImgName=""},async addActu(){await T(_(p,"actus"),{title:this.currentTitle,text:this.currentText,imgUrl:this.currentImgUrl,imgName:this.currentImgName}),this.resetCurrentActu()},async deleteActu(n){const s=this.actus.findIndex(u=>u.id===n);await I(A(p,"actus",n)),this.actus.splice(s,1)},async modifyActu(n){await C(A(p,"actus",n),{title:this.currentTitle,text:this.currentText,imgUrl:this.currentImgUrl,imgName:this.currentImgName}),this.resetCurrentActu()},addImg(n){const s=M(k,"actus/"+n.target.files[0].name),u=n.target.files[0],d=U(s,u);d.on("state_changed",e=>{const r=e.bytesTransferred/e.totalBytes*100;switch(this.uploadProgress=r,e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},e=>{console.log(e)},()=>{w(d.snapshot.ref).then(e=>{this.currentImgName=n.target.files[0].name,this.currentImgUrl=e,this.uploadProgress=0})})}}},c=n=>(V("data-v-52980922"),n=n(),P(),n),q={key:0},D=c(()=>t("h2",{class:"h4 p-3"},"Actualit\xE9s publi\xE9es",-1)),R={class:"d-flex justify-content-center flex-wrap"},E={class:"h5 text-center py-2"},F={class:""},G=["src"],L={class:"text-justify"},z={class:"d-flex justify-content-between py-3"},H=["onClick"],J=["onClick"],K={class:"d-flex justify-content-center py-4"},Q={key:0},W=c(()=>t("h2",null,"G\xE9rer les stages",-1)),X=[W],Y={key:1},Z=c(()=>t("h2",null,"G\xE9rer les animations",-1)),$=[Z],tt={key:0,id:"bgModal"},et={key:0,id:"actuModal",class:"col-6 d-flex flex-column align-items-center"},st=c(()=>t("h1",{class:"h5 text-center py-3"},"Modifier cette actualit\xE9",-1)),nt={class:"form-group col-10"},it=c(()=>t("label",{for:"actuTitre"},"Titre",-1)),rt={class:"form-group col-10"},lt=c(()=>t("label",{for:"actuText"},"Contenu textuel",-1)),ot={class:"col-6 d-flex justify-content-between py-3"},ct={key:1,id:"actuModal",class:"col-6 d-flex flex-column align-items-center"},ut=c(()=>t("h1",{class:"h5 text-center py-3"},"Ajouter une actualit\xE9",-1)),at={class:"form-group col-10"},dt=c(()=>t("label",{for:"actuTitre"},"Titre",-1)),mt={class:"form-group col-10"},pt=c(()=>t("label",{for:"actuText"},"Contenu textuel",-1)),ft={class:"form-group col-10 danger"},gt=c(()=>t("label",{for:"actuImage"},"Ajouter une image",-1)),ht={key:0,id:"progressBar"},_t={class:"col-4"},At=["src"],bt={class:"col-12 d-flex justify-content-around py-3"};function xt(n,s,u,d,e,r){return l(),o("div",null,[h(x,null,{default:b(()=>[u.isActusOpen?(l(),o("div",q,[D,t("div",R,[(l(!0),o(N,null,S(e.actus,i=>(l(),o("div",{key:i.id,class:"cards col-4 m-3 d-flex flex-column justify-content-between"},[t("div",E,y(i.title),1),t("div",F,[t("img",{src:i.imgUrl,class:"cardsImg float-left mr-3"},null,8,G),t("p",L,y(i.text),1)]),t("div",z,[t("button",{class:"btn btn-warning",onClick:m=>((e.isModalOpen=!0)&(e.isModifyActuModalOpen=!0),r.getCurrentActu(i.id))}," Modifier ",8,H),t("button",{class:"btn btn-danger",onClick:m=>r.deleteActu(i.id)}," Supprimer ",8,J)])]))),128))]),t("div",K,[t("button",{onClick:s[0]||(s[0]=i=>(e.isCreateActuModalOpen=!0)&(e.isModalOpen=!0)),class:"btn btn-success"}," + Ajouter une actualit\xE9 ")])])):a("",!0)]),_:1}),e.isStagesOpen?(l(),o("div",Q,X)):a("",!0),e.isAnimsOpen?(l(),o("div",Y,$)):a("",!0),h(x,null,{default:b(()=>[e.isModalOpen?(l(),o("div",tt,[e.isModifyActuModalOpen?(l(),o("div",et,[st,t("div",nt,[it,f(t("input",{type:"text",class:"form-control",id:"actuTitre","onUpdate:modelValue":s[1]||(s[1]=i=>e.currentTitle=i)},null,512),[[g,e.currentTitle]])]),t("div",rt,[lt,f(t("textarea",{class:"form-control",id:"actuText",rows:"3","onUpdate:modelValue":s[2]||(s[2]=i=>e.currentText=i)},null,512),[[g,e.currentText]])]),t("div",ot,[t("button",{class:"btn btn-danger",onClick:s[3]||(s[3]=i=>((e.isModalOpen=!1)&(e.isModifyActuModalOpen=!1),r.resetCurrentActu()))}," Annuler "),t("button",{class:"btn btn-success",onClick:s[4]||(s[4]=i=>(r.modifyActu(e.currentId),e.isModalOpen=!1,r.getActus()))}," Valider ")])])):a("",!0),e.isCreateActuModalOpen?(l(),o("div",ct,[ut,t("div",at,[dt,f(t("input",{type:"text",class:"form-control",id:"actuTitre","onUpdate:modelValue":s[5]||(s[5]=i=>e.currentTitle=i)},null,512),[[g,e.currentTitle]])]),t("div",mt,[pt,f(t("textarea",{class:"form-control",id:"actuText",rows:"3","onUpdate:modelValue":s[6]||(s[6]=i=>e.currentText=i)},null,512),[[g,e.currentText]])]),t("div",ft,[gt,t("input",{type:"file",class:"form-control-file",id:"actuImage",onChange:s[7]||(s[7]=(...i)=>r.addImg&&r.addImg(...i))},null,32)]),e.uploadProgress>0?(l(),o("div",ht,[e.uploadProgress>0?(l(),o("div",{key:0,id:"progress",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:j({width:e.uploadProgress+"%"})},null,4)):a("",!0)])):a("",!0),t("div",_t,[t("img",{src:e.currentImgUrl,class:"img-fluid"},null,8,At)]),t("div",bt,[t("button",{class:"btn btn-danger",onClick:s[8]||(s[8]=i=>(e.isModalOpen=!1)&(e.isCreateActuModalOpen=!1))}," Annuler "),t("button",{class:"btn btn-success",onClick:s[9]||(s[9]=i=>(r.addActu(),(e.isModalOpen=!1)&(e.isCreateActuModalOpen=!1),r.getActus()))}," Valider ")])])):a("",!0)])):a("",!0)]),_:1})])}var yt=v(B,[["render",xt],["__scopeId","data-v-52980922"]]);const vt={data(){return{isActusOpen:!0}}},Ot={class:"mainContainer"},Tt={class:"d-flex pt-3"},It=t("h1",{class:"h3 mx-3"},"Panel administrateur",-1),Ct=t("hr",null,null,-1);function Mt(n,s,u,d,e,r){const i=yt;return l(),o("div",Ot,[t("div",Tt,[It,t("div",null,[t("button",{onClick:s[0]||(s[0]=m=>((e.isActusOpen=!0)&(n.isStagesOpen=!1)&(n.isAnimsOpen=!1),n.getActus())),class:"btn btn-info mr-3"}," Actualit\xE9s "),t("button",{onClick:s[1]||(s[1]=m=>(e.isActusOpen=!1)&(n.isStagesOpen=!0)&(n.isAnimsOpen=!1)),class:"btn btn-info mr-3"}," Stages "),t("button",{onClick:s[2]||(s[2]=m=>(e.isActusOpen=!1)&(n.isStagesOpen=!1)&(n.isAnimsOpen=!0)),class:"btn btn-info mr-3"}," Animations ")])]),Ct,h(i,{isActusOpen:e.isActusOpen},null,8,["isActusOpen"])])}var Ut=v(vt,[["render",Mt]]);export{Ut as default};
